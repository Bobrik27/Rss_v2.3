# Руководство по разработке проекта "Run Swift Studio v3"

## Установка и запуск

### Установка
1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd RSS_v2.3
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите сервер разработки:
```bash
npm run dev
```

Сайт будет доступен по адресу `http://localhost:4321`.

### Скрипты
- `npm run dev` - Запуск сервера разработки
- `npm run build` - Сборка продакшен-сайта
- `npm run preview` - Предварительный просмотр продакшен-сборки локально
- `npm run astro` - Запуск команд Astro CLI

## Локализация

Сайт поддерживает три языка:
- Русский (по умолчанию)
- Английский
- Немецкий

Маршруты структурированы как `/[lang]/`, где lang может быть `ru`, `en` или `de`.

## Content Collections

Сайт использует коллекции контента Astro для управления блогами и новостями:

### Блоги
Схема включает:
- `title` (string)
- `description` (string)
- `pubDate` (date)
- `image` (string, optional)
- `tags` (array of strings)
- `author` (string, optional)
- `readTime` (string, optional)

### Новости
Схема включает:
- `title` (string)
- `description` (string)
- `pubDate` (date)
- `image` (string, optional)
- `tags` (array of strings)
- `source` (string, optional)
- `category` (string, optional)

## Оптимизация производительности

### Оптимизация производительности
- Использование `client:visible` для тяжелых компонентов
- Минимизация JavaScript на Main Thread
- Оптимизация изображений и медиа-ресурсов
- Lazy loading для удаленного контента

### Код качества
- Строгая типизация с TypeScript
- Использование Zod для валидации контента
- ESLint и Prettier для форматирования кода
- Тестирование компонентов и функций

### Организация компонентов
- Четкое разделение между Astro и React компонентами
- Использование семантических имен для компонентов
- Поддержание чистой архитектуры с минимальными зависимостями

## Тестирование

### Модульное тестирование
- Jest для тестирования TypeScript/JavaScript функций
- React Testing Library для тестирования React компонентов
- Vitest для быстрого выполнения тестов

### Интеграционное тестирование
- Проверка корректной работы контентных коллекций
- Тестирование локализации и переключения языков
- Проверка корректности маршрутизации

### E2E тестирование
- Playwright или Cypress для тестирования пользовательских сценариев
- Проверка корректности отображения на разных устройствах
- Тестирование производительности и доступности

## Деплой и CI/CD

### Пайплайн деплоя

#### CI/CD
- Автоматическая сборка при пуше в main ветку
- Запуск тестов перед деплоем
- Автоматическое развертывание на Netlify
- Проверка производительности и SEO метрик

#### Переменные окружения
- Использование .env файлов для конфигурации окружения
- Разделение переменных для dev, staging и prod
- Безопасное хранение секретов

### Сборка и деплой
- Статическая сборка (SSG) для Netlify
- Отсутствие гидрационных несоответствий (server HTML должен совпадать с клиентским рендером)

### Рассмотрение развертывания
#### Метрики производительности
- Цели по Core Web Vitals
- Оптимизация First Contentful Paint (FCP)
- Улучшение Largest Contentful Paint (LCP)
- Минимизация Cumulative Layout Shift (CLS)

#### Стратегия кэширования
- HTTP кэширование статических ресурсов
- CDN для доставки контента
- Версионирование ассетов
- Preloading критических ресурсов

#### Мониторинг
- Логирование ошибок и исключений
- Отслеживание производительности
- A/B тестирование UX изменений
- Анализ пользовательского поведения

## Контент-менеджмент

### Markdown Frontmatter
- Использование строго типизированных frontmatter полей
- Валидация через Zod схемы
- Поддержка изображений и медиа-ресурсов
- Автоматическая генерация метаданных

### SEO и метатеги
- Автоматическая генерация Open Graph тегов
- Поддержка hreflang для мультиязычных страниц
- Canonical URL для избежания дублирования контента
- Schema.org структурированные данные

## Маршрутизация
- Используется ручная маршрутизация i18n в astro.config.mjs
- Поддержка языков: ru, en, de
- Дефолтный язык: ru

## Middleware
- Простое middleware для i18n
- Установка локалей в контексте
- Возможность автоматического определения языка

## Вклад в проект

1. Сделайте форк репозитория
2. Создайте ветку фичи (`git checkout -b feature/amazing-feature`)
3. Зафиксируйте изменения (`git commit -m 'Add amazing feature'`)
4. Отправьте в ветку (`git push origin feature/amazing-feature`)
5. Откройте Pull Request

## Структура данных (src/data/landing.ts)
- Компетенции: архитектура, процессы, инфраструктура, ИИ, Telegram, гарантия
- Решения: SMM-экосистемы, Telegram-платформы, ИИ-ассистенты, аудит и рефакторинг
- О студии: информация и статистика
- Подход: анализ, прототипирование, реализация, поддержка
- Призыв к действию

## Стилизация
Проект использует Tailwind CSS v4 с настраиваемой системой тем, определенной в `src/styles/global.css`. Тема включает:

- **Система цветов**: OKLCH цвета для темной и светлой тем
- **Типографика**: Inter (без засечек) и JetBrains Mono (моноширинный) шрифты
- **Радиус границы**: Пользовательские размеры радиуса (sm, md, lg, xl)
- **Анимации**: Появление и подъем

## Архитектура компонентов

### Astro компоненты
- Используются для статического контента и макетов
- Файлы с расширением `.astro`
- Используются для макетов, статических разделов

### React компоненты
- Используются только для сложной интерактивности
- Файлы с расширением `.jsx` или `.tsx`
- Реализованы с архитектурой острова Astro (`client:*` директивы)

### Архитектура острова
- Директива `client:visible` для тяжелых компонентов
- `client:only="react"` для компонентов, требующих полной гидратации
- Минимизация работы основного потока

## Деплой
Сайт настроен для генерации статического сайта и может быть развернут на таких платформах, как Netlify, Vercel или GitHub Pages.

## AI Agency Core (_core_remote)

### Функции
- **Автономные конвейеры**: Многоступенчатый бизнес-анализ с автоматическим прогрессом
- **Оркестровка LLM**: Гибкая конфигурация агента с откатом модели
- **Отслеживание статуса в реальном времени**: Мониторинг прогресса с индикаторами фазы
- **Финансовые расчеты**: Метрики ROI и расчеты периода окупаемости
- **Лицензирование нескольких уровней**: Уровни гостя, начинающего, бизнеса и премиум
- **Безопасная аутентификация**: Контроль доступа на основе токенов службы
- **Асинхронная обработка**: Выполнение фоновых задач с ограничением ресурсов
- **Альтернативные данные**: Устойчивая работа при недоступности внешних API

### Файловая структура
```
_core_remote/
├── .env.example
├── .gitignore
├── docker-compose.yml
├── Dockerfile
├── func.md
├── mapfiles.md
├── project_analysis.md
├── requirements.txt
├── test_stealth.py
├── src/
│   ├── api.py
│   ├── app.py
│   ├── main.py
│   ├── roster_loader.py
│   ├── __init__.py
│   ├── assets/
│   │   ├── logo.png
│   │   ├── templates/
│   │   │   ├── report_template.html
│   │   │   └── style.css
│   ├── config/
│   │   ├── intake_questions.json
│   │   ├── products.yaml
│   ├── core/
│   │   ├── agent_factory.py
│   │   ├── auto_teaser.py
│   │   ├── calculator.py
│   │   ├── pdf_engine.py
│   │   ├── security.py
│   │   ├── state_manager.py
│   │   ├── translator.py
│   │   └── tools/
│   │       ├── asset_manager.py
│   │       ├── review_scraper.py
│   │       ├── wb_scraper.py
│   │       └── wb_analyzer/
│   │           └── wb_scraper.py
│   ├── flows/
│   │   ├── enterprise_os/
│   │   │   ├── broker_agent.py
│   │   │   ├── stage_6_handover.py
│   │   │   └── stage_1_5_questionnaire/
│   │   │   └── stage_1_discovery/
│   │   │   └── stage_2_intel/
│   │   │   └── stage_3_strategy/
│   │   │   └── stage_4_architecture/
│   │   │   └── stage_5_commercial/
│   │   ├── review_detective/
│   │   │   └── teaser/
│   │   └── wb_audit/
│   └── roster/
│       ├── builder_devops.yaml
│       ├── cfo_guardian.yaml
│       ├── closer_shark.yaml
│       ├── diagnostic_prime.yaml
│       ├── wb_analyst.yaml
│       ├── wb_writer.yaml
│       └── [many more agent configurations]
```

## Лицензия
Этот проект лицензирован по лицензии MIT.