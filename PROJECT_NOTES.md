# Техническая документация проекта "Run Swift Studio v3"

## Общая информация
- **Название проекта:** Run Swift Studio v3 (RSS_v2.3)
- **Тип проекта:** Портфолио-сайт с блогом и новостями
- **Фреймворк:** Astro v5
- **Языки программирования:** TypeScript, React 19
- **Стили:** Tailwind CSS v4
- **Цель:** Создание высокопроизводительного портфолио-сайта с поддержкой мультиязычности и контентных коллекций

## Структура проекта

### Основные директории
- `src/` - основной код приложения
 - `pages/[lang]/` - локализованные маршруты
  - `components/react/` - интерактивные React-компоненты (Hero, формы)
  - `components/astro/` - статические UI-компоненты (карточки, футер)
  - `content/` - коллекции контента (блог, новости)
  - `i18n/` - словари переводов
  - `layouts/` - макеты страниц
  - `lib/` - служебные утилиты
  - `styles/` - глобальные стили

- `public/` - статические ресурсы (изображения, иконки)
- `source/` - старые версии и вспомогательные файлы (Word-документы, старые версии сайта)

### Старые версии
- `source/old_page/` - старая версия сайта на чистом HTML/CSS/JS
- `source/old_page2/` - предыдущая версия на Astro с React и Tailwind

## Зависимости

### Основные зависимости
- `astro` - фреймворк для создания веб-приложений
- `@astrojs/react` - интеграция React с Astro
- `react`, `react-dom` - библиотека для создания пользовательских интерфейсов
- `tailwindcss` - фреймворк для стилей
- `@tailwindcss/vite` - плагин для интеграции Tailwind с Vite

### Дополнительные зависимости (в old_page2)
- `@gsap/react`, `gsap` - библиотека для анимаций
- `framer-motion` - библиотека анимаций
- `lucide-react` - иконки
- `@types/react`, `@types/react-dom` - типы для React
- `typescript` - язык программирования
- `tw-animate-css` - анимации для Tailwind //test

## Архитектура компонентов

### Astro-компоненты
- Используются по умолчанию для структуры, макетов и статического контента
- Файлы с расширением `.astro`
- Используются для лейаутов, статических секций

### React-компоненты
- Используются ТОЛЬКО для сложной интерактивности
- Файлы с расширением `.jsx` или `.tsx`
- Примеры: Hero-анимации, калькуляторы, переключатель темы
- Используются с островной архитектурой Astro (`client:*`)

### Islands архитектура
- Используется директива `client:visible` для тяжелых компонентов
- Минимизация работы Main Thread
- Используется `client:only="react"` для компонентов, требующих полной гидратации

## Стили и темизация

### Tailwind CSS v4
- Используется без `tailwind.config.js`
- Все настройки в `src/styles/global.css` через `@theme`
- Используются цвета в формате oklch для темной/светлой темы

### Цветовая схема
- Основная тема: "SaaS Dark/Light" (Deep Slate/Cyan)
- Темная тема по умолчанию (чтобы избежать вспышки белого при загрузке)
- Переключение через атрибут `data-theme="dark/light"`
- Использование CSS-переменных для управления цветами

### Глобальные стили
- Файл: `src/styles/global.css`
- Определение цветов и темы через `@theme`
- Базовые стили и слои (layers)

## Анимации и производительность

### GSAP и Canvas анимации
- Используются для сложных анимаций (например, анимация падающих букв)
- Всегда используется `useRef` защита (`isInitialized`) для предотвращения двойного срабатывания в Strict Mode
- Очистка слушателей возвращается в `return` функции
- `pixelRatio` ограничен значением `Math.min(window.devicePixelRatio, 2)` для экономии GPU

### Производительность
- Минимизация работы Main Thread
- Использование `client:visible` для нижних/тяжелых секций
- Строгая типизация, избегание `any`
- Использование легковесных библиотек вместо тяжелых (Three.js/Matter.js)

## Контент и данные

### Content Collections
- Используются для Markdown-контента (блог, новости)
- Файл конфигурации: `src/content/config.ts`
- Строгая типизация через Zod-схемы
- Поддержка различных полей (заголовок, описание, дата публикации, теги и т.д.)

### Генерация маршрутов
- Используется `getStaticPaths()` для генерации маршрутов с локализацией
- Поддержка динамических маршрутов `[lang]` и `[slug]`

## SEO и метатеги

### Компонент BaseHead
- Каждая страница должна содержать компонент с метатегами
- Поддержка канонических URL, Open Graph тегов, описания
- Поддержка `hreflang` тегов для мультиязычности

### Метатеги
- Определение в Layout-компонентах
- Поддержка динамических заголовков и описаний

## Локализация

### Поддержка языков
- Поддержка RU/EN/DE через динамические маршруты `[lang]`
- Словари переводов в `src/i18n/`

## Сборка и деплой

### Цель
- Статическая сборка (SSG) для Netlify
- Отсутствие гидрационных несоответствий (server HTML должен совпадать с клиентским рендером)

### Скрипты
- `dev` - запуск в режиме разработки
- `build` - сборка проекта
- `preview` - предпросмотр сборки
- `astro` - CLI команды Astro

## Особенности реализации

### ScrollHero компонент
- Использует canvas для анимации комет
- Использует GSAP для анимации падающих букв
- Сложная физика движения букв при скролле
- Использует `useGSAP` для интеграции с React

### ThemeToggle компонент
- Переключение между светлой и темной темой
- Сохранение настроек в localStorage
- Учет системных настроек пользователя

### Layout компонент
- Общий макет для всех страниц
- Подключение глобальных стилей
- Реализация анимации "reveal-on-scroll" через Intersection Observer