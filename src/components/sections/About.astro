---
import { content } from '../../i18n/content';

interface Props {
  lang?: string;
}

const { lang = 'ru' } = Astro.props;

const validLang = (['en', 'de', 'ru'] as const).includes(lang as any) ? lang as keyof typeof content : 'ru';
const t = content[validLang];
const strategy = t.strategy;

// Иконки для карточек (можно использовать SVG из lucide-react, но для простоты используем inline)
const icons = [
  `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-blue-400"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>`,
  `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-purple-400"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line></svg>`,
  `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-emerald-400"><path d="M12 8V4H8"></path><rect x="2" y="6" width="20" height="12" rx="2"></rect><path d="M6 18h4"></path><path d="M15 18h3"></path><path d="M17 8.5V6"></path><path d="M12 15.5V18"></path><path d="M17 15.5V18"></path><path d="M7 8.5V6"></path></svg>`,
  `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-amber-400"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>`
];

const cards = Object.values(strategy.cards);
---

<section class="py-24 bg-background text-foreground overflow-hidden">
  <div class="container mx-auto px-6">
    <div class="flex flex-col lg:flex-row gap-12 items-start">
      
      <!-- Контентная часть (Лево) -->
      <div class="lg:w-1/2 lg:sticky lg:top-24 pt-0">
        <div class="inline-block px-4 py-1.5 mb-6 text-sm font-medium tracking-wider uppercase border border-white/10 rounded-full bg-white/5">
          {strategy.badge}
        </div>
        <h2 class="text-5xl lg:text-6xl font-bold mb-6 leading-[1.1] bg-gradient-to-r from-white via-white to-white/40 bg-clip-text text-transparent">
          {strategy.title}
        </h2>
        <div class="space-y-6 text-muted-foreground text-lg leading-relaxed max-w-xl">
          <p>
            {strategy.mainText}
          </p>
          <p>
            {strategy.extraParagraph}
          </p>
          <p class="pt-4 border-t border-white/10">
            {strategy.finalNote}
          </p>
        </div>
      </div>

      <!-- Карточки (Право) -->
      <div class="lg:w-1/2 grid grid-cols-1 md:grid-cols-2 gap-4">
        {cards.map((card, index) => {
          const icon = icons[index];
          // Цвета свечения в зависимости от индекса
          const glowColors = [
            'hover:border-blue-500/50 hover:shadow-[0_0_30px_-10px_rgba(59,130,246,0.5)]',
            'hover:border-purple-500/50 hover:shadow-[0_0_30px_-10px_rgba(168,85,247,0.5)]',
            'hover:border-emerald-500/50 hover:shadow-[0_0_30px_-10px_rgba(16,185,129,0.5)]',
            'hover:border-amber-500/50 hover:shadow-[0_0_30px_-10px_rgba(245,158,11,0.5)]'
          ];
          return (
            <div
              class={`group relative p-8 rounded-3xl border border-white/5 bg-white/[0.02] transition-all duration-500 ${glowColors[index]}`}
            >
              <div class="mb-6 p-3 inline-block rounded-2xl bg-white/5 group-hover:scale-110 transition-transform duration-500" set:html={icon}></div>
              
              <div class="flex justify-between items-start mb-2">
                <h3 class="text-xl font-bold text-foreground">{card.title}</h3>
                <span class="text-[10px] uppercase tracking-widest text-white/30 font-bold">{card.tag}</span>
              </div>
              
              <div class="text-xs text-blue-400/60 font-mono mb-4 uppercase tracking-wider">
                {card.subtitle}
              </div>
              
              <p class="text-sm text-muted-foreground leading-relaxed group-hover:text-foreground/80 transition-colors">
                {card.text}
              </p>
            </div>
          );
        })}
      </div>

    </div>
  </div>
</section>